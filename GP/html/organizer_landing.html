<!DOCTYPE html>

<html>

<head>

<title>Organizer GUI</title>


<script>
var create_url = "https://0h0x7juqld.execute-api.us-east-2.amazonaws.com/Alpha";



function processCreateResponse(name, startDate, endDate, startHour, endHour, duration) {
	//String order: name of schedule, start date, end date, time availability starts, time availability ends, duration of time slots
	
	//the calculator code only takes the result from the two values, parses and updates the page with it
	
	//Do we need to parse any values here? arg1 and arg 2 in the calculator processResponse function are not used at all in that function
	
	alert("Your schedule has been created.");
}

function processGoResponse() {
	
	alert("Here is the schedule you requested.");
}
	

	function handleClick(e) {
	
  var form = document.getElementById("createSchedule");
  var form = document.getElementById("existingSchedule");
  var name = form.name.value;
  var startDate = form.startDate.value;
  var endDate = form.endDate.value;
  var startHour = form.startHour.value;
  var endHour = form.endHour.value;
  var duration = form.duration.value;
  var secretCode = schedForm.secretCode.value;

  var data = {};
  data["name"] = name;
  data["startDate"] = startDate;
  data["endDate"] = endDate;
  data["startHour"] = startHour;
  data["endHour"] = endHour;
  data["duration"] = duration;
  data["secretCode"] = secretCode;

  var js = JSON.stringify(data);
  console.log("JS:" + js);
  var xhr = new XMLHttpRequest();
  xhr.open("POST", create_url, true);

  // send the collected data as JSON
  xhr.send(js);

  // This will process results and update HTML as appropriate. 
  xhr.onloadend = function () {
    console.log(xhr);
    console.log(xhr.request);
    if (xhr.readyState == XMLHttpRequest.DONE) {
      console.log ("XHR:" + xhr.responseText);
      		processCreateResponse(name, startDate, endDate, startHour, endHour, duration, xhr.responseText);
    } else {
      	processCreateResponse(name, startDate, endDate, startHour, endHour, duration, "N/A");
    }
  };
}

	

</script>

<h1>Welcome to Meeting Scheduler</h1>
<h2>Create Schedule</h2>
</head>

<form name="createForm" method="post" id="createSchedule">
 <input type="text" name = "name" value="Name" />

<p>From:<input type="date" name="startDate" min="2018-01-01"></p>

<p>To:<input type="date" name="endDate" min="2018-01-01"></p>

<p>From:<input type="time" name="startHour">To:<input type="time" name="endHour"></p>

<p>Duration:<select name="duration">
  <option value="10 Minutes">10</option>
  <option value="15 Minutes">15</option>
  <option value="20 Minutes">20</option>
  <option value="30 Minutes">30</option>
  <option value="60 Minutes">60</option>
</select></p>
<input type="button" name = "createBtn" value="Create"  onClick="JavaScript:handleClick(this)">
</form>

<head><h2>Go to pre-existing Schedule</h2></head>

<form name="existingForm" method ="post" id="existingSchedule">
 <input type="text" name = "secretCode" value="Secret Code" >
 <input type="button" name = "goBtn" value="Go"  onClick="JavaScript:processGoResponse()">
</form>

</body>
</html>
