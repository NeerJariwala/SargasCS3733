<!DOCTYPE html>

<html>

<head>

<title>Organizer GUI</title>


<script>

	/* 
	function processResponse(arg1, arg2, result) {
  // Can grab any DIV or SPAN HTML element and can then manipulate its
  // contents dynamically via javascript
  console.log("result:" + result);
  var js = JSON.parse(result);

  var computation = js["value"];

  // Update computation result
  document.addForm.result.value = computation
}
*/


function processResponse(name, startDate, endDate, startHour, endHour, duration) {
	//String order: name of schedule, start date, end date, time availability starts, time availability ends, duration of time slots
	
	//the calculator code only takes the result from the two values, parses and updates the page with it
	
	//Do we need to parse any values here? arg1 and arg 2 in the calculator processResponse function are not used at all in that function
	
	var created = prompt("Your schedule has been created.");
}
	

	function handleClick(e) {
  var form = document.createForm;
  var name = form.name.value;
  var startDate = form.startDate.value;
  var endDate = form.endDate.value;
  var startHour = form.startHour.value;
  var endHour = form.endHour.value;
  var duration = form.duration.value;

  var data = {};
  data["name"] = name;
  data["startDate"] = startDate;
  data["endDate"] = endDate;
  data["startHour"] = startHour;
  data["endHour"] = endHour;
  data["duration"] = duration;

  var js = JSON.stringify(data);
  console.log("JS:" + js);
  var xhr = new XMLHttpRequest();
  xhr.open("POST", add_url, true);

  // send the collected data as JSON
  xhr.send(js);

  // This will process results and update HTML as appropriate. 
  xhr.onloadend = function () {
    console.log(xhr);
    console.log(xhr.request);
    if (xhr.readyState == XMLHttpRequest.DONE) {
      console.log ("XHR:" + xhr.responseText);
      processResponse(name, startDate, endDate, startHour, endHour, duration, xhr.responseText);
    } else {
       processResponse(name, startDate, endDate, startHour, endHour, duration,  "N/A");
    }
  };
}
	

</script>

<h1>Welcome to Meeting Scheduler</h1>
<h2>Create Schedule</h2>
</head>

<form name="createForm" method="post" name="createSchedule">
 <input type="text" value="Name" />

<p>From:<input type="date" name="startDate" min="2018-01-01"></p>

<p>To:<input type="date" name="endDate" min="2018-01-01"></p>

<p>From:<input type="time" name="startHour">To:<input type="time" name="endHour"></p>

<p>Duration:<select name="duration">
  <option value="10 Minutes">10</option>
  <option value="15 Minutes">15</option>
  <option value="20 Minutes">20</option>
  <option value="30 Minutes">30</option>
  <option value="60 Minutes">60</option>
</select></p>
<input type="button" value="Create"  onClick="JavaScript:handleClick(this)">
</form>

<head><h2>Go to pre-existing Schedule</h2></head>

<form name="existingForm" method ="post" name="existingSchedule">
 <input type="text" value="Secret Code" />
 <input type="button" value="Go"  onClick="JavaScript:handleClick(this)">
</form>

</body>
</html>
